<a name="_b7urdng99y53"></a>

### Название задачи:
Реализация функционала истории заказов в системе NovaMarket

<a name="_hjk0fkfyohdk"></a>

### Автор: Команда
рзаработки NovaMarket

<a name="_uanumrh8zrui"></a>

### Дата: 25
08.2025

<a name="_3bfxc9a45514"></a>

### Функциональные требования
| № |Действующие лица или системы   |Use Case                     |Описание                                                                                                     | 
| 1 | Пользователь                  | Просмотр истории заказов    | Пользователь заходит в личный кабинет и запрашивает историю своих заказов.                                  | 
| 2 | Система                       | Получение истории заказов   | Система запрашивает данные о заказах из базы данных и возвращает их пользователю.                           | 
| 3 | Пользователь                  | Просмотр деталей заказа     | Пользователь выбирает конкретный заказ для просмотра деталей, включая список товаров, их количество и цену. | 
| 4 | Пользователь                  | Скачивание чека             | Пользователь может скачать чек на заказ в формате PDF.                                                      | 
| 5 | Пользователь                  | Оставить отзыв              | Пользователь оставляет отзыв о товаре, связанном с заказом.                                                 |

<a name="_u8xz25hbrgql"></a>

### Нефункциональные требования
| № | Требование                                                                 | 
| 1 | Высокая доступность системы для пользователей.                             |
| 2 | Быстрая реакция интерфейсов приложения (время отклика < 200 мс).           |
| 3 | Масштабируемость для обработки увеличенного числа пользователей и заказов. |
| 4 | Безопасность данных пользователей и заказов.                               |
| 5 | Легкость в поддержке и расширении функционала.                             |

<a name="_qmphm5d6rvi3"></a>

### Решение
Для реализации функционала истории заказов было выбрано комбинированное решение, основанное на паттернах API Composition и CQRS.

***API Composition:*** Используется для агрегирования данных из различных микросервисов (например, OrderService, ProductService, ReviewService) и предоставления пользователю единого интерфейса для просмотра истории заказов.

***CQRS:*** Разделяет операции чтения и записи, что позволяет оптимизировать производительность и масштабируемость. Запросы на получение истории заказов обрабатываются отдельно от команд на создание или изменение заказов.

### Диаграммы контекста и контейнеров
"./app_scheme.puml"

<a name="_bjrr7veeh80c"></a>
#### Альтернативы

***Event Sourcing:***
Плюсы: Позволяет отслеживать все изменения состояния заказов, что может быть полезно для аудита и восстановления данных.
Минусы: Усложняет архитектуру и требует дополнительных усилий для реализации и поддержки. Для текущей задачи является избыточным, так как перемещение
по истории не предполагается.

***Только API Composition:***
Плюсы: Простота реализации и понимания.
Минусы: Может привести к проблемам с производительностью при большом количестве запросов, так как все данные будут запрашиваться в реальном времени.

***Только CQRS:***
Плюсы: Четкое разделение логики чтения и записи, что может улучшить производительность.
Минусы: Усложняет архитектуру и требует дополнительного кода для управления состоянием.

### Недостатки, ограничения, риски
- Сложность: Комбинация паттернов увеличивает сложность системы, что может затруднить поддержку и развитие.
- Координация данных: Необходимо обеспечить согласованность данных между микросервисами, что может потребовать дополнительных усилий.
- Задержки:При использовании API Composition могут возникнуть задержки при агрегации данных из нескольких источников.
- Неполнота данных при отказе одного из сервисов. Необходимость обеспечение отказоустойчивости при отказе отдного из сервисов и отсутствии данных.