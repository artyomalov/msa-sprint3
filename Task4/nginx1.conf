http {
    limit_req_zone $binary_remote_addr zone=web:10m rate=50r/s
    limit_req_zone $binary_remote_addr zone=mobile:10m rate=30r/s

    server {
        listen 80;

        # Limit requests to the /api/ endpoint for web applications
        location /api/web/ {
            limit_req zone=web burst=100 nodelay
            proxy_pass http://backend;
        }

        # Limit requests to the /api/ endpoint for mobile applications
        location /api/mobile/ {
            limit_req zone=mobile burst=50 nodelay
            proxy_pass http://backend;
        }
    }
}